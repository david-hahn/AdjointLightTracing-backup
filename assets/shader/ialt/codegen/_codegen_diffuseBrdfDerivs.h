const float t2 = eta_ext*eta_ext;
const float t3 = eta_ext*eta_ext*eta_ext;
const float t4 = 1.0/eta_int;
const float t6 = -lp1;
const float t7 = -lp2;
const float t8 = -lp3;
const float t5 = t4*t4;
const float t9 = hp1+t6;
const float t10 = hp2+t7;
const float t11 = hp3+t8;
const float t12 = (t9/abs(t9));
const float t13 = (t10/abs(t10));
const float t14 = (t11/abs(t11));
const float t15 = abs(t9);
const float t16 = abs(t10);
const float t17 = abs(t11);
const float t18 = t15*t15;
const float t19 = t16*t16;
const float t20 = t17*t17;
const float t21 = t18+t19+t20;
const float t22 = 1.0/sqrt(t21);
const float t23 = t22*t22*t22;
const float t24 = n1*t22;
const float t25 = n2*t22;
const float t26 = n3*t22;
const float t27 = -t24;
const float t28 = -t25;
const float t29 = -t26;
const float t30 = t9*t24;
const float t31 = t10*t25;
const float t32 = t11*t26;
const float t33 = n1*t9*t12*t15*t23;
const float t34 = n2*t10*t12*t15*t23;
const float t35 = n1*t9*t13*t16*t23;
const float t36 = n3*t11*t12*t15*t23;
const float t37 = n2*t10*t13*t16*t23;
const float t38 = n1*t9*t14*t17*t23;
const float t39 = n3*t11*t13*t16*t23;
const float t40 = n2*t10*t14*t17*t23;
const float t41 = n3*t11*t14*t17*t23;
const float t42 = t30+t31+t32;
const float t57 = t27+t33+t34+t36;
const float t58 = t28+t35+t37+t39;
const float t59 = t29+t38+t40+t41;
const float t43 = abs(t42);
const float t44 = (t42/abs(t42));
const float t45 = t43*t43;
const float t46 = eta_int*t43;
const float t47 = eta_ext*t43;
const float t70 = eta_int*t44*t57;
const float t71 = eta_ext*t44*t57;
const float t72 = eta_int*t44*t58;
const float t73 = eta_ext*t44*t58;
const float t74 = eta_int*t44*t59;
const float t75 = eta_ext*t44*t59;
const float t48 = -t46;
const float t49 = -t47;
const float t50 = t45-1.0;
const float t51 = t2*t5*t50;
const float t52 = t51+1.0;
const float t53 = sqrt(t52);
const float t54 = 1.0/t53;
const float t55 = eta_int*t53;
const float t56 = eta_ext*t53;
const float t60 = t47+t55;
const float t61 = t46+t56;
const float t62 = t49+t55;
const float t63 = t48+t56;
const float t68 = pow(t47-t55,2.0);
const float t69 = pow(t46-t56,2.0);
const float t76 = t2*t4*t43*t44*t54*t57;
const float t77 = t3*t5*t43*t44*t54*t57;
const float t78 = t2*t4*t43*t44*t54*t58;
const float t79 = t3*t5*t43*t44*t54*t58;
const float t80 = t2*t4*t43*t44*t54*t59;
const float t81 = t3*t5*t43*t44*t54*t59;
const float t64 = 1.0/(t60*t60);
const float t65 = 1.0/(t61*t61);
const float t66 = 1.0/(t60*t60*t60);
const float t67 = 1.0/(t61*t61*t61);
gradDiffuse[0] = -t64*(t47-t55)*(t71-t76)-t65*(t46-t56)*(t70-t77)+t66*t68*(t71+t76)+t67*t69*(t70+t77);
gradDiffuse[1] = -t64*(t47-t55)*(t73-t78)-t65*(t46-t56)*(t72-t79)+t66*t68*(t73+t78)+t67*t69*(t72+t79);
gradDiffuse[2] = -t64*(t47-t55)*(t75-t80)-t65*(t46-t56)*(t74-t81)+t66*t68*(t75+t80)+t67*t69*(t74+t81);
